# π [Troubleshooting] λ¦¬μ•΅νΈ λ„¤λΉ„κ²μ΄μ… λ° μƒνƒ λ™κΈ°ν™” μ΄μ ν•΄κ²° λ¨μ
κ΄€λ ¨[μ»¤λ°‹](https://github.com/softeerbootcamp-7th/WEB-Team7-Jackpot/commit/775a551c370b14278aa95521ba813e1ffa323dcd)μ…λ‹λ‹¤.

## 1. [λ³µμ΅ν• λμ¤ μ΄λ™ μ‹ λ„¤λΉ„κ²μ΄μ… μƒνƒ κΌ¬μ„ λ° μ‘μ§‘λ„ μ €ν•](https://github.com/softeerbootcamp-7th/WEB-Team7-Jackpot/wiki/%5B%EB%B0%95%EC%86%8C%EB%AF%BC%5D-%E2%80%90-%EB%B3%B5%EC%9E%A1%ED%95%9C-%EB%B7%B0(View)-%EC%A0%84%ED%99%98-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-%EB%84%A4%EB%B9%84%EA%B2%8C%EC%9D%B4%EC%85%98-%EC%83%81%ED%83%9C-%EC%BA%A1%EC%8A%90%ED%99%94)
---

### π“ λ¬Έμ  μƒν™©
- **λ°μƒ ν™κ²½:** κ²€μƒ‰ κ²°κ³Ό λ‚΄ μƒμ„Έ λ·°(ν΄λ” -> λ¦¬μ¤νΈ -> μƒμ„Έ) μ΄λ™μ΄ λΉλ²ν• ν™κ²½
- **μ¦μƒ:** 'λ’¤λ΅ κ°€κΈ°' λλ” 'ν΄λ” μ¬μ„ νƒ' μ‹ μ΄μ „ μƒνƒ(μ„ νƒλ λ¬Έν•­ λ“±)κ°€ μ΄κΈ°ν™”λμ§€ μ•κ³  λ‚¨μ•„μκ±°λ‚, μ—…λ°μ΄νΈ νƒ€μ΄λ°μ΄ μ–΄κΈ‹λ‚ UIκ°€ λΉ„μ •μƒμ μΌλ΅ λ…Έμ¶λλ” μƒνƒ κΌ¬μ„ λ²„κ·Έ λ°μƒ.

### π” μ›μΈ λ¶„μ„
- **μ²μ μμ‹¬ν• μ›μΈ:** νΉμ • μ»΄ν¬λ„νΈμ `useEffect` μ΄κΈ°ν™” λ΅μ§ λ„λ½.
- **μ‹¤μ  μ›μΈ:** μ»΄ν¬λ„νΈ λ‚΄λ¶€μ— ννΈν™”λ λ‹¤μμ `useState`(`selectedLibrary`, `selectedItem` λ“±) μ‚¬μ©μΌλ΅ μΈν• μƒνƒ μ—…λ°μ΄νΈ λ„λ½ λ° λ¬΄κ²°μ„± νκ΄΄.
- **μ›μΈ νμ•… κ³Όμ •:** μƒνƒ λ³€κ²½ μ•΅μ…μ΄ μΌμ–΄λ‚  λ• μ—°κ΄€λ μ—¬λ¬ μƒνƒλ¥Ό κ°κ° μ—…λ°μ΄νΈν•λ‹¤ λ³΄λ‹, νΉμ • μ΅°κ±΄μ—μ„ μ—°μ‡„μ μΈ μ΄κΈ°ν™” λ΅μ§μ΄ μ‹¤ν–‰λμ§€ μ•λ” κ²ƒμ„ ν™•μΈ.

### π›  ν•΄κ²° λ°©λ²•
1. **λ‹¨μΌ κ°μ²΄ κΈ°λ° μƒνƒ κ΄€λ¦¬:** μ—°κ΄€λ λ„¤λΉ„κ²μ΄μ… μƒνƒλ¥Ό ν•λ‚μ κ°μ²΄(`LibraryNavigationState`)λ΅ ν†µν•©ν•μ—¬ μ›μμ  μ—…λ°μ΄νΈ(Atomic Update) λ³΄μ¥.
2. **Custom Hook (`useLibraryNavigation`) μΊ΅μν™”:** μƒνƒ μ „μ΄(Transition) λ΅μ§μ„ ν›… λ‚΄λ¶€λ΅ μ¨κΈ°κ³ , UI μ»΄ν¬λ„νΈμ—λ” λ…ν™•ν• μΈν„°νμ΄μ¤(`selectLibrary` λ“±)λ§ λ…Έμ¶ν•μ—¬ λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό UI λ¶„λ¦¬.



```typescript
// μµμΆ… ν•΄κ²° κµ¬μ΅°: Custom Hookμ„ ν†µν• μƒνƒ μ „μ΄ μΊ΅μν™”
export const useLibraryNavigation = () => {
  const [state, setState] = useState<LibraryNavigationState>({
    selectedItem: null,
    selectedLibrary: null,
  });

  // μƒνƒ μ „μ΄(Transition) λ©”μ„λ“λ¥Ό λ…ν™•ν μ •μν•μ—¬ λ¬΄κ²°μ„± λ³΄μ¥
  const selectLibrary = (libraryName: string) => {
    // ν΄λ” μ„ νƒ μ‹ λ¬Έν•­ μ΄κΈ°ν™”λ¥Ό ν• λ²μ setState λ‚΄μ—μ„ κ°•μ ν•¨
    setState({ selectedItem: null, selectedLibrary: libraryName });
  };
  
  return { state, selectLibrary };
};
```

## 2. [μ‚­μ λ κ²€μƒ‰μ–΄κ°€ λμ‚΄μ•„λ‚λ” 'URL μΆ€λΉ„ λ²„κ·Έ'](https://github.com/softeerbootcamp-7th/WEB-Team7-Jackpot/wiki/%5B%EB%B0%95%EC%86%8C%EB%AF%BC%5D-%E2%80%90-%EA%B2%80%EC%83%89%EC%96%B4-%EC%9C%A0%EC%A7%80%EC%99%80-Race-Condition-%EA%B4%80%EB%A6%AC)

### π“ λ¬Έμ  μƒν™©
* **λ°μƒ ν™κ²½**: κ²€μƒ‰ νλΌλ―Έν„°(`?keyword=`)λ¥Ό μ‚¬μ©ν•λ” νƒ­ μ „ν™ ν™κ²½
* **μ¦μƒ**: κ²€μƒ‰μ–΄λ¥Ό μ‚­μ ν•κ³  λ‹¤λ¥Έ νμ΄μ§€λ΅ μ΄λ™ν–μμ—λ„, μ°°λ‚μ μκ°„ URLμ— μ΄μ „ κ²€μƒ‰μ–΄κ°€ λ‹¤μ‹ λ‚νƒ€λ‚λ©° κ°•μ λ΅ κ²€μƒ‰ κ²°κ³Ό ν™”λ©΄μΌλ΅ λ¦¬λ‹¤μ΄λ ‰νΈλλ” ν„μƒ.

### π” μ›μΈ λ¶„μ„
* **μ²μ μμ‹¬ν• μ›μΈ**: λΈλΌμ°μ €μ λ’¤λ΅κ°€κΈ° μΊμ‹ λ¬Έμ .
* **μ‹¤μ  μ›μΈ**: **'νμ΄μ§€ μ΄λ™(Route Change)'**κ³Ό **'κ²€μƒ‰μ–΄ λ³µμ›(Storage to State)'** λ΅μ§ κ°„μ **λ μ΄μ¤ μ»¨λ””μ…(Race Condition)**.
* **μ›μΈ νμ•… κ³Όμ •**: λ¦¬μ•΅νΈμ λ λ”λ§ μ‚¬μ΄ν΄κ³Ό λΈλΌμ°μ € URL μ—…λ°μ΄νΈ μ†λ„ μ°¨μ΄λ΅ μΈν•΄, μ‚­μ  μ „μ λ΅μ»¬ μ¤ν† λ¦¬μ§€ κ°’μ΄ μƒ νμ΄μ§€ μ§„μ… μ‹μ μ— URL νλΌλ―Έν„°λ΅ μ¬μ£Όμ…λ¨μ„ ν™•μΈν–μµλ‹λ‹¤.



### π›  ν•΄κ²° λ°©λ²•
1.  **λ΅λ”© μƒνƒ(`isTransitioning`) κΈ°λ° μμ„ μ μ–΄**: νƒ­ μ „ν™ μ‹ μ¦‰μ‹ ν™”λ©΄μ„ κ·Έλ¦¬μ§€ μ•κ³  μ¤μΌλ ν†¤ UIλ¥Ό λ…Έμ¶ν•μ—¬ μ„Έν… μ‹κ°„μ„ ν™•λ³΄ν–μµλ‹λ‹¤.
2.  **λ‹¨κ³„λ³„ λ™κΈ°ν™” λ΅μ§**: λ΅λ”© μ¤‘μ— μ•„λ μμ„λ΅ νλ¦„μ„ μ μ–΄ν•μ—¬ μ¶©λμ„ λ°©μ§€ν–μµλ‹λ‹¤.
    * `μ €μ¥μ† λ°μ΄ν„° ν™•μΈ` β†’ `URL νλΌλ―Έν„° μ„Έν…` β†’ `μµμΆ… UI λ…Έμ¶`

---

## 3. [URL-Storage-State λ™κΈ°ν™” μ‹ ν™”λ©΄ κΉλΉ΅μ„(Flicker)](https://github.com/softeerbootcamp-7th/WEB-Team7-Jackpot/wiki/%5B%EB%B0%95%EC%86%8C%EB%AF%BC%5D-%E2%80%90-%EA%B2%80%EC%83%89-%EC%BB%A4%EC%8A%A4%ED%85%80-%ED%9B%85-%EA%B4%80%EB%A6%AC)

### π“ λ¬Έμ  μƒν™©
* **λ°μƒ ν™κ²½**: κ²€μƒ‰μ–΄, ν΄λ” ID λ“± λ‹¤μμ μƒνƒκ°€ URLκ³Ό λ΅μ»¬ μ¤ν† λ¦¬μ§€μ— λ™κΈ°ν™”λλ” λ³µν•© νμ΄μ§€
* **μ¦μƒ**: νμ΄μ§€ μ§„μ… μ‹ λ°μ΄ν„°κ°€ λ³µκµ¬λλ” κ³Όμ •μ—μ„ μ΄μ „ UIκ°€ μ κΉ λ³΄μ€λ‹¤κ°€ λ°”λ€λ” **1ν”„λ μ„μ μ‹κ°μ  κΉλΉ΅μ„(Flicker)** λ°μƒ.

### π” μ›μΈ λ¶„μ„
* **μ²μ μμ‹¬ν• μ›μΈ**: API λ°μ΄ν„° λ΅λ”© μ†λ„ μ§€μ—°.
* **μ‹¤μ  μ›μΈ**: `useEffect` κΈ°λ°μ μ‚¬ν›„ λ™κΈ°ν™”(**Waterfall Rendering**)λ΅ μΈν• λ¶ν•„μ”ν• μ¶”κ°€ λ λ”λ§.
* **μ›μΈ νμ•… κ³Όμ •**: μ»΄ν¬λ„νΈ λ§μ΄νΈ ν›„ `useEffect`μ—μ„ μƒνƒλ¥Ό μ„Έν…ν•λ©΄ `μ΄κΈ°κ°’ λ λ”λ§` β†’ `Effect μ‹¤ν–‰` β†’ `λ¦¬λ λ”λ§` κ³Όμ •μ„ κ±°μΉκ² λμ–΄ μ΄κΈ°κ°’μ΄ μ‚¬μ©μμ—κ² λ…Έμ¶λ¨μ„ ν™•μΈν–μµλ‹λ‹¤.



### π›  ν•΄κ²° λ°©λ²•
1.  **κ΄€μ‹¬μ‚¬ λ¶„λ¦¬(SoC)λ¥Ό ν†µν• ν›… μν‰ λ¶„ν• **: κ²€μƒ‰μ–΄ λ‹΄λ‹Ή(`useSearch`)κ³Ό μ„ νƒ μƒνƒ λ‹΄λ‹Ή(`useLibrarySelectionSync`) ν›…μ„ λ¶„λ¦¬ν•μ—¬ ν™•μ¥μ„±μ„ ν™•λ³΄ν–μµλ‹λ‹¤.
2.  **νμƒ μƒνƒ(Derived State/Snapshot) ν¨ν„΄**: `useEffect`λ¥Ό κΈ°λ‹¤λ¦¬μ§€ μ•κ³ , λ λ”λ§ λ„μ¤‘ ν„μ¬ URLκ³Ό μ €μ¥μ† κ°’μ„ μ§μ ‘ κ³„μ‚°ν•μ—¬ μ¦‰μ‹ λ΅λ”© μ—¬λ¶€(`isSyncingUrl`)λ¥Ό κ²°μ •ν•¨μΌλ΅μ¨ κΉλΉ΅μ„μ„ μ°¨λ‹¨ν–μµλ‹λ‹¤.

### π“ κ°μ„  κ²°κ³Ό λΉ„κµ

| ν•­λ© | κ°μ„  μ „ (Effect κΈ°λ°) | κ°μ„  ν›„ (Derived State κΈ°λ°) |
| :--- | :--- | :--- |
| **λ™κΈ°ν™” μ‹μ ** | λ§μ΄νΈ ν›„ (μ‚¬ν›„ μ²λ¦¬) | **λ λ”λ§ λ„μ¤‘ (μ‚¬μ „ μ²λ¦¬)** |
| **λ λ”λ§ νμ** | 2ν μ΄μƒ μ λ° | **λ‹¨μΌ μ‚¬μ΄ν΄ λ‚΄ μ™„λ£** |
| **μ‚¬μ©μ κ²½ν—** | ν™”λ©΄ κΉλΉ΅μ„ λ°μƒ | **κΉλΉ΅μ„ μ—†λ” λ¶€λ“λ¬μ΄ μ „ν™** |

---

## β… μ”μ•½ λ° νκ³ 
λ‹¨μν κΈ°λ¥ κµ¬ν„μ— κ·ΈμΉμ§€ μ•κ³ , λ¦¬μ•΅νΈμ λ λ”λ§ λΌμ΄ν”„μ‚¬μ΄ν΄κ³Ό μ™Έλ¶€ μ‹μ¤ν…(URL, Storage) κ°„μ λ™κΈ°ν™” νƒ€μ΄λ°μ„ κΉμ΄ μκ² κ³ λ―Όν• κ³Όμ •μ΄μ—μµλ‹λ‹¤. 

νΉν `useEffect`μ— μμ΅΄ν•λ κ΄€μµμ μΈ λ°©μ‹μ—μ„ λ²—μ–΄λ‚, **μƒνƒ μ „μ΄λ¥Ό μΊ΅μν™”**ν•κ³  **νμƒ μƒνƒλ¥Ό ν™μ©ν•΄ UIλ¥Ό μ μ–΄**ν•λ” κ²ƒμ΄ κ²¬κ³ ν• ν”„λ΅ νΈμ—”λ“ μ•„ν‚¤ν…μ²μ ν•µμ‹¬μ„μ„ κΉ¨λ‹¬μ•μµλ‹λ‹¤.

