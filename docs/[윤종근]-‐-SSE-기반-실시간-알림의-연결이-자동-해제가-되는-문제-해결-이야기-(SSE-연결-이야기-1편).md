# π SSE κΈ°λ° μ‹¤μ‹κ°„ μ•λ¦Όμ μ—°κ²°μ΄ μλ™ ν•΄μ κ°€ λλ” λ¬Έμ  ν•΄κ²° μ΄μ•ΌκΈ° (SSE μ—°κ²° μ΄μ•ΌκΈ° 1νΈ)

## μ”μ•½
- μ¦μƒ: SSE μ—°κ²°μ΄ 1λ¶„ μ£ΌκΈ°λ΅ λκΈ°κ³  μ•½ 5ν λ°λ³µ ν›„ μ„λ²„ λ¦¬μ†μ¤ ν•κ³„λ΅ μΈν•΄ μ¬μ—°κ²° λ£¨ν”„ λ°μƒ
- ν•µμ‹¬ μ›μΈ: μΈν”„λΌ(Nginx)μ νƒ€μ„μ•„μ›ƒ μ„¤μ •κ³Ό μ„λ²„ μΈ΅ TTL κ΄€λ¦¬
- ν•΄κ²°: μ„λ²„ TTLμ„ μ§§κ² κ°€μ Έκ°€λ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Ό ν•νΈλΉ„νΈλ¥Ό λ„μ…ν•μ—¬ μ„Έμ…μ„ λ¥λ™μ μΌλ΅ μ—°μ¥ν•μ—¬ μ•μ •μ„± ν™•λ³΄

## π“ λ¬Έμ  μƒν™©
- κµ¬ν„ μ •λ³΄:
  - μ‹¤μ‹κ°„ ν†µμ‹  λ°©μ‹ μ¤‘ SSEλ¥Ό μ΄μ©ν•μ—¬ μ‹¤μ‹κ°„ μ•λ¦Όμ„ κµ¬ν„
  - μ—°κ²° μ‹ μ•΅μ„Έμ¤ ν† ν°μ„ ν—¤λ”μ— λ„£μ–΄μ•Όν•΄μ„ EventSourceκ°€ μ•„λ‹ fetchλ¥Ό ν™μ©ν•μ—¬ κµ¬ν„
- λ¬Έμ  μƒν™©:
  - 1λ¶„λ§λ‹¤ SSE μ—°κ²°μ΄ μλ™μΌλ΅ ν•΄μ 
  - μ»¤μ¤ν…€ ν›…(`useSSE`)κ°€ μΆ…λ£λ¥Ό κ°μ§€ν•κ³  3μ΄ λ’¤ μ¬μ—°κ²° μ‹λ„
  - 5ν ν•΄μ  μ΄ν›„λ¶€ν„° λ¬΄ν• μ¬μ—°κ²°μ΄ λ°μƒ

## π” μ›μΈ λ¶„μ„
- μ²μ μμ‹¬ν• μ›μΈ: ν΄λΌμ΄μ–ΈνΈμ JSON νμ‹± λ΅μ§μ—μ„ μμ™Έ λ°μƒκ³Ό `AbortController`μ ν΄λ¦°μ—… λ―Έν΅μΌλ΅ μΈν• μ¤‘λ³µ μ—°κ²° μƒμ„±
- μ‹¤μ  μ›μΈ:
  - Nginxμ κΈ°λ³Έ νƒ€μ„μ•„μ›ƒμ΄ 1λ¶„μΌλ΅ μ„¤μ •λμ–΄ μμ–΄ λ°μ΄ν„° μ „μ†΅μ΄ μ—†λ” Idle μƒνƒκ°€ μ§€μ†λμ μ—°κ²°μ„ κ°•μ λ΅ λμ
  - μ΄κΈ° μ„¤κ³„ μ‹ μ„λ²„ TTLμ΄ κΈΈκ² μ΅ν€ μμ–΄ μ‹¤μ  μ—°κ²°μ΄ λκ²Όμμ—λ„ μ„λ²„ λ©”λ¨λ¦¬μ—λ” μ„Έμ… μ •λ³΄κ°€ λ‚¨μ•„ λ¦¬μ†μ¤λ¥Ό κ³„μ† μ μ 
- μ›μΈ νμ•… κ³Όμ •:
  - ν΄λΌμ΄μ–ΈνΈ λ΅κ·Έ ν™•μΈ κ²°κ³Ό `readStream`μ€ ν•‘μ„ μ •μƒμ μΌλ΅ λ¬΄μ‹ν•κ³  μμ—κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈ νμ‹± μ¤λ¥κ°€ μ•„λ‹μ—μ
  - SSE μ—°κ²°κ³Ό κ΄€λ ¨ν•μ—¬ μ„λ²„ λ‹΄λ‹Ήμμ™€ μ†ν†µμ„ ν•μ—¬ λκΈ°λ” μ£ΌκΈ°κ°€ μΈν”„λΌμ νƒ€μ„μ•„μ›ƒ μ„¤μ •κ°’κ³Ό μΌμΉν•¨μ„ ν™•μΈ

## π›  ν•΄κ²° λ°©λ²•
1. μΈν”„λΌ μ„¤μ • λ° fetch keepalive μ‹λ„
  - μ„λ²„μ—μ„ μ£ΌκΈ°μ μΈ ν•νΈλΉ„νΈ μ†΅μ‹  μ‹λ„
2. ν΄λΌμ΄μ–ΈνΈ μ¬μ—°κ²° μ „λµ κµ¬μƒ
  - 3μ΄λ§λ‹¤ μ—°κ²°μ„ μ¬μ‹λ„ -> μ§€μ λ°±μ¤ν”„ λ°©μ‹μΌλ΅ μ—°κ²°μ„ μ¬μ‹λ„ν•μ—¬ μ„λ²„ λ¶€ν• κ²½κ° (λ°©λ²• κµ¬μƒ ν›„ ν„μ¬λ” λ―Έλ„μ…)
  - μ—°κ²° μ ν•(400 μ—λ¬) λ°μƒ μ‹ μ¬μ—°κ²°μ„ μ¦‰μ‹ μ¤‘λ‹¨ν•λ„λ΅ κ°€λ“ λ΅μ§ μ¶”κ°€ (λ„μ…)
3. [μµμΆ… ν•΄κ²° λ°©λ²•] ν•νΈλΉ„νΈλ¥Ό μ‚¬μ©ν•μ—¬ ν”„λ΅μ‹/λ΅λ“λ°Έλ°μ„ νƒ€μ„μ•„μ›ƒ μ μ§€
  - μ„λ²„ μ „λµ: ν•νΈλΉ„νΈλ¥Ό μ‚¬μ©ν•μ—¬ ν”„λ΅μ‹/λ΅λ“λ°Έλ°μ„ νƒ€μ„μ•„μ›ƒ μ μ§€
  - κ²°κ³Ό: μΈν”„λΌ νƒ€μ„μ•„μ›ƒ μ΄μ „μ— ν†µμ‹ μ΄ λ°μƒν•μ—¬ μ—°κ²°μ΄ μ μ§€

## μ¶”κ°€μ μΌλ΅ κ³ λ―Όν•΄λ³Ό λ‚΄μ©
- μ—¬λ¬ λ²μ μƒλ΅κ³ μΉ¨μ„ λ„λ¥΄λ©΄ μΆ€λΉ„ μ»¤λ„¥μ…μ΄ λ‚¨μ•„μμ–΄μ„ μ—°κ²° μ΄κ³Όκ°€ λλ” λ¬Έμ λ” ν•΄κ²°ν•μ§€ λ»ν–μ§€λ§ ν•΄κ²° λ°©μ•μ„ κµ¬μƒν•΄λ΄„
  1. `beforeunload` λ°μƒ μ‹ `navigator.sendBeacon`μ„ ν†µν•΄ μ„λ²„κ°€ μ κ³µν• API(λ…μ‹μ μΌλ΅ SSE μ—°κ²° μΆ…λ£ μ”μ²­)μΌλ΅ νμ› μ •λ³΄λ¥Ό λ³΄λ‚΄κ³  μ„λ²„κ°€ Redis μ„Έμ…μ„ μ¦‰μ‹ λ‚ λ¦¬λ„λ΅ ν•λ” λ°©μ‹
  2. Shared Worker: λΈλΌμ°μ €μ λ©”μΈ μ¤λ λ“κ°€ μ•„λ‹ λ³„λ„μ μ¤λ λ“λ¥Ό ν™μ©ν•μ—¬ λΈλΌμ°μ €μ λ¨λ“  νƒ­/μƒλ΅κ³ μΉ¨κ³Ό μƒκ΄€μ—†μ΄ λ°±κ·ΈλΌμ΄λ“μ— ν•λ‚μ SSE μ—°κ²°λ§ μ μ§€ν•λ” λ°©μ‹